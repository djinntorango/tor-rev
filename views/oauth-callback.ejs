<!-- views/oauth-callback.ejs -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enter Email</title>
    <link id="favicon" rel="icon" href="https://cdn.glitch.global/887fed5c-3c1b-472d-8fdc-c2a3bad1fe27/oillamp(powderblue).svg?v=1709088268120" type="image/x-icon">
    <link rel="stylesheet" type="text/css" href="https://torango-exporter.glitch.me/public/styles.css" />
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LRS5LVL8ED"></script>
</head>
<body>
    <header>
        <h1>List of Articles</h1>
    </header>
    <main>
        <section>
            <table>
                <thead>
                    <tr>
                        <th>Title</th>
                        <th>Created At</th>
                        <th>Edited At</th>
                        <th>Revise</th>
                    </tr>
                </thead>
                <tbody>
                    <% const pageSize = 10; %>
                    <% const start = (pageNum - 1) * pageSize; %>
                    <% const end = Math.min(start + pageSize, articles.length); %>
                    <% const displayedArticles = articles.slice(start, end); %>
                    <% displayedArticles.forEach(article => { %>
                        <tr>
                            <td><a href="<%= article.html_url %>"><%= article.title %></a></td>
                            <td><%= new Date(article.created_at).toLocaleString() %></td>
                            <td><%= new Date(article.edited_at).toLocaleString() %></td>
                            <td><button>Revise</button></td>
                        </tr>
                    <% }); %>
                </tbody>
            </table>
            <% if (pageNum > 1) { %>
                <a href="/articles?page=<%= pageNum - 1 %>">Previous</a>
            <% } %>
            <% if (articles.length > end) { %>
                <a href="/articles?page=<%= pageNum + 1 %>">Next</a>
            <% } %>
        </section>
    </main>
</body>
</html>
